{
    "sourceFile": "rust/knhk-warm/examples/warm_path_query.rs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1762384058341,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1762384058341,
            "name": "Commit-0",
            "content": "//! Warm path query examples\n//! Demonstrates SELECT, ASK queries, RDF loading, and cache performance\n\nuse knhk_warm::{WarmPathGraph, execute_select, execute_ask, execute_construct, execute_describe};\nuse std::time::Instant;\n\nfn main() -> Result<(), Box<dyn std::error::Error>> {\n    // Example 1: Create a warm path graph\n    println!(\"=== Example 1: Creating Warm Path Graph ===\");\n    let graph = WarmPathGraph::new()?;\n    println!(\"✓ Graph created successfully\\n\");\n\n    // Example 2: Load RDF data from Turtle string\n    println!(\"=== Example 2: Loading RDF Data ===\");\n    let turtle_data = r#\"\n        @prefix ex: <http://example.org/> .\n        \n        ex:Alice ex:knows ex:Bob .\n        ex:Bob ex:knows ex:Charlie .\n        ex:Alice ex:age \"30\"^^<http://www.w3.org/2001/XMLSchema#integer> .\n        ex:Bob ex:age \"25\"^^<http://www.w3.org/2001/XMLSchema#integer> .\n    \"#;\n    \n    graph.load_from_turtle(turtle_data)?;\n    println!(\"✓ Loaded {} triples\\n\", graph.size());\n\n    // Example 3: Execute SELECT query\n    println!(\"=== Example 3: SELECT Query ===\");\n    let select_query = r#\"\n        PREFIX ex: <http://example.org/>\n        SELECT ?person ?age WHERE {\n            ?person ex:age ?age .\n        }\n    \"#;\n    \n    let start = Instant::now();\n    let select_result = execute_select(&graph, select_query)?;\n    let duration = start.elapsed();\n    \n    println!(\"Query executed in {:?}\", duration);\n    println!(\"Found {} bindings:\", select_result.bindings.len());\n    for binding in &select_result.bindings {\n        println!(\"  {:?}\", binding);\n    }\n    println!();\n\n    // Example 4: Execute ASK query\n    println!(\"=== Example 4: ASK Query ===\");\n    let ask_query = r#\"\n        PREFIX ex: <http://example.org/>\n        ASK {\n            ex:Alice ex:knows ex:Bob .\n        }\n    \"#;\n    \n    let start = Instant::now();\n    let ask_result = execute_ask(&graph, ask_query)?;\n    let duration = start.elapsed();\n    \n    println!(\"Query executed in {:?}\", duration);\n    println!(\"Result: {}\\n\", ask_result.result);\n\n    // Example 5: Execute CONSTRUCT query\n    println!(\"=== Example 5: CONSTRUCT Query ===\");\n    let construct_query = r#\"\n        PREFIX ex: <http://example.org/>\n        CONSTRUCT {\n            ?person ex:hasFriend ?friend .\n        } WHERE {\n            ?person ex:knows ?friend .\n        }\n    \"#;\n    \n    let start = Instant::now();\n    let construct_result = execute_construct(&graph, construct_query)?;\n    let duration = start.elapsed();\n    \n    println!(\"Query executed in {:?}\", duration);\n    println!(\"Constructed {} triples:\", construct_result.triples.len());\n    for triple in &construct_result.triples {\n        println!(\"  {}\", triple);\n    }\n    println!();\n\n    // Example 6: Cache performance demonstration\n    println!(\"=== Example 6: Cache Performance ===\");\n    let test_query = r#\"\n        PREFIX ex: <http://example.org/>\n        SELECT ?person WHERE {\n            ?person ex:knows ?friend .\n        }\n    \"#;\n    \n    // First execution (cache miss)\n    let start = Instant::now();\n    let _result1 = execute_select(&graph, test_query)?;\n    let first_duration = start.elapsed();\n    \n    // Second execution (cache hit)\n    let start = Instant::now();\n    let _result2 = execute_select(&graph, test_query)?;\n    let second_duration = start.elapsed();\n    \n    println!(\"First execution (cache miss): {:?}\", first_duration);\n    println!(\"Second execution (cache hit): {:?}\", second_duration);\n    println!(\"Speedup: {:.1}x\", \n        first_duration.as_nanos() as f64 / second_duration.as_nanos() as f64);\n    println!();\n\n    // Example 7: Query metrics\n    println!(\"=== Example 7: Query Metrics ===\");\n    let metrics = graph.get_metrics();\n    println!(\"Total queries: {}\", metrics.total_queries);\n    println!(\"Cache hits: {}\", metrics.cache_hits);\n    println!(\"Cache misses: {}\", metrics.cache_misses);\n    println!(\"Cache hit rate: {:.1}%\", metrics.cache_hit_rate * 100.0);\n    println!();\n\n    // Example 8: Load RDF from file\n    println!(\"=== Example 8: Loading RDF from File ===\");\n    // Note: This would require a file path\n    // graph.load_from_file(\"path/to/data.ttl\")?;\n    println!(\"(File loading example - requires file path)\\n\");\n\n    // Example 9: Insert triples programmatically\n    println!(\"=== Example 9: Inserting Triples ===\");\n    graph.insert_triple(\n        \"http://example.org/Dave\",\n        \"http://example.org/knows\",\n        \"http://example.org/Eve\"\n    )?;\n    println!(\"✓ Inserted triple: Dave knows Eve\");\n    println!(\"Graph size: {} triples\\n\", graph.size());\n\n    // Example 10: Batch query execution\n    println!(\"=== Example 10: Batch Query Execution ===\");\n    let queries = vec![\n        \"SELECT ?s WHERE { ?s <http://example.org/knows> ?o }\",\n        \"ASK { <http://example.org/Alice> <http://example.org/knows> <http://example.org/Bob> }\",\n    ];\n    \n    let start = Instant::now();\n    for query in &queries {\n        if query.trim().to_uppercase().starts_with(\"SELECT\") {\n            let _result = execute_select(&graph, query)?;\n        } else if query.trim().to_uppercase().starts_with(\"ASK\") {\n            let _result = execute_ask(&graph, query)?;\n        }\n    }\n    let batch_duration = start.elapsed();\n    \n    println!(\"Executed {} queries in {:?}\", queries.len(), batch_duration);\n    println!(\"Average per query: {:?}\\n\", batch_duration / queries.len() as u32);\n\n    Ok(())\n}\n\n"
        }
    ]
}