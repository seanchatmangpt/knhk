import { createDarkMatterCore } from './src/knowledge-engine/knowledge-substrate-core.mjs';
import { parseTurtle } from './src/knowledge-engine/parse.mjs';

async function main() {
    const system = await createDarkMatterCore({
        enableKnowledgeHookManager: true,
        enableLockchainWriter: false
    });

    const turtleData = `{{ turtle_data | escape_js }}`;
    const store = await parseTurtle(turtleData);

    const quads = [];
    store.forEach(q => quads.push(q));

    await system.executeTransaction({
        additions: quads,
        removals: [],
        actor: 'knhk-rust'
    });

    console.log('SUCCESS');
}

main().catch(err => {
    console.error('ERROR:', err.message);
    process.exit(1);
});

