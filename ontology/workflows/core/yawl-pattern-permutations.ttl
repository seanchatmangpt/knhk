@prefix pattern: <http://knhk.ai/ontology/workflow-patterns#> .
@prefix yawl: <http://www.yawlfoundation.org/yawlschema#> .
@prefix mapek: <http://knhk.ai/ontology/mape-k#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# ============================================================================
# YAWL Workflow Pattern Permutations (43 Van der Aalst Patterns)
# ============================================================================
#
# Complete specification of all 43 workflow patterns from:
# "Workflow Patterns: The Definitive Guide" by Van der Aalst et al.
#
# Each pattern is annotated with:
# - Pattern number (1-43)
# - Category (Basic, Advanced Branching, Multiple Instance, State-Based, etc.)
# - Control flow semantics (join/split types)
# - Expected execution characteristics (ticks, determinism)
# - MAPE-K annotations for autonomic behavior
#
# Reference: http://www.workflowpatterns.com/
# ============================================================================

pattern:Ontology a owl:Ontology ;
    rdfs:label "YAWL Workflow Pattern Permutations" ;
    rdfs:comment "Complete Van der Aalst workflow pattern catalog (43 patterns)" ;
    owl:versionInfo "1.0.0" ;
    owl:imports <http://www.yawlfoundation.org/yawlschema#> ;
    owl:imports <http://knhk.ai/ontology/mape-k#> .

# ============================================================================
# Pattern Categories
# ============================================================================

pattern:BasicControlFlowPattern a owl:Class ;
    rdfs:label "Basic Control Flow Pattern" ;
    rdfs:comment "Patterns 1-5: Fundamental control flow constructs" .

pattern:AdvancedBranchingPattern a owl:Class ;
    rdfs:label "Advanced Branching and Synchronization Pattern" ;
    rdfs:comment "Patterns 6-11: Complex branching and merging" .

pattern:MultipleInstancePattern a owl:Class ;
    rdfs:label "Multiple Instance Pattern" ;
    rdfs:comment "Patterns 12-15: Handling multiple task instances" .

pattern:StateBasedPattern a owl:Class ;
    rdfs:label "State-Based Pattern" ;
    rdfs:comment "Patterns 16-18: State-dependent routing" .

pattern:CancellationPattern a owl:Class ;
    rdfs:label "Cancellation and Force Completion Pattern" ;
    rdfs:comment "Patterns 19-25: Cancellation semantics" .

# ============================================================================
# BASIC CONTROL FLOW PATTERNS (1-5)
# ============================================================================

pattern:Pattern1_Sequence a pattern:BasicControlFlowPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 1: Sequence" ;
    rdfs:comment "Tasks execute in strict sequential order" ;
    pattern:patternNumber 1 ;
    pattern:vanDerAalstId "WCP1" ;
    pattern:joinType "XOR" ;
    pattern:splitType "XOR" ;
    pattern:expectedTicks 1 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    mapek:hasConstraint mapek:ChatmanConstant ;
    pattern:yamlMapping """
        task:
          join: XOR
          split: XOR
          flows: single outgoing flow
    """ .

pattern:Pattern2_ParallelSplit a pattern:BasicControlFlowPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 2: Parallel Split (AND-split)" ;
    rdfs:comment "Divergence of execution into multiple parallel branches" ;
    pattern:patternNumber 2 ;
    pattern:vanDerAalstId "WCP2" ;
    pattern:joinType "AND" ;
    pattern:splitType "AND" ;
    pattern:expectedTicks 2 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    mapek:hasConstraint mapek:ChatmanConstant ;
    pattern:yamlMapping """
        task:
          join: AND
          split: AND
          flows: multiple outgoing flows (all execute)
    """ .

pattern:Pattern3_Synchronization a pattern:BasicControlFlowPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 3: Synchronization (AND-join)" ;
    rdfs:comment "Convergence of multiple parallel branches into single thread" ;
    pattern:patternNumber 3 ;
    pattern:vanDerAalstId "WCP3" ;
    pattern:joinType "AND" ;
    pattern:splitType "AND" ;
    pattern:expectedTicks 3 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    mapek:hasConstraint mapek:ChatmanConstant ;
    pattern:yamlMapping """
        task:
          join: AND (wait for all incoming flows)
          split: AND
    """ .

pattern:Pattern4_ExclusiveChoice a pattern:BasicControlFlowPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 4: Exclusive Choice (XOR-split)" ;
    rdfs:comment "Selection of exactly one branch from multiple alternatives" ;
    pattern:patternNumber 4 ;
    pattern:vanDerAalstId "WCP4" ;
    pattern:joinType "XOR" ;
    pattern:splitType "XOR" ;
    pattern:expectedTicks 2 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    mapek:hasConstraint mapek:ChatmanConstant ;
    pattern:yamlMapping """
        task:
          join: XOR
          split: XOR
          flows: multiple outgoing flows with predicates
                 (exactly one evaluates to true)
    """ .

pattern:Pattern5_SimpleMerge a pattern:BasicControlFlowPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 5: Simple Merge (XOR-join)" ;
    rdfs:comment "Convergence of alternative branches without synchronization" ;
    pattern:patternNumber 5 ;
    pattern:vanDerAalstId "WCP5" ;
    pattern:joinType "XOR" ;
    pattern:splitType "XOR" ;
    pattern:expectedTicks 1 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    mapek:hasConstraint mapek:ChatmanConstant ;
    pattern:yamlMapping """
        task:
          join: XOR (proceed when any incoming flow arrives)
          split: XOR
    """ .

# ============================================================================
# ADVANCED BRANCHING AND SYNCHRONIZATION PATTERNS (6-11)
# ============================================================================

pattern:Pattern6_MultiChoice a pattern:AdvancedBranchingPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 6: Multi-Choice (OR-split)" ;
    rdfs:comment "Selection of one or more branches from multiple alternatives" ;
    pattern:patternNumber 6 ;
    pattern:vanDerAalstId "WCP6" ;
    pattern:joinType "OR" ;
    pattern:splitType "OR" ;
    pattern:expectedTicks 3 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    pattern:yamlMapping """
        task:
          join: OR
          split: OR
          flows: multiple outgoing flows with predicates
                 (one or more may evaluate to true)
    """ .

pattern:Pattern7_StructuredSynchronizingMerge a pattern:AdvancedBranchingPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 7: Structured Synchronizing Merge" ;
    rdfs:comment "Convergence of branches activated by earlier OR-split" ;
    pattern:patternNumber 7 ;
    pattern:vanDerAalstId "WCP7" ;
    pattern:joinType "OR" ;
    pattern:splitType "OR" ;
    pattern:expectedTicks 4 ;
    pattern:isDeterministic true ;
    pattern:preservesKGC true ;
    pattern:yamlMapping """
        task:
          join: OR (wait for all active incoming flows)
          split: OR
          note: Synchronized with corresponding OR-split
    """ .

pattern:Pattern8_MultiMerge a pattern:AdvancedBranchingPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 8: Multi-Merge" ;
    rdfs:comment "Convergence that activates for each incoming branch" ;
    pattern:patternNumber 8 ;
    pattern:vanDerAalstId "WCP8" ;
    pattern:joinType "XOR" ;
    pattern:splitType "XOR" ;
    pattern:expectedTicks 2 ;
    pattern:isDeterministic false ;
    pattern:preservesKGC false ;
    rdfs:comment "Non-deterministic: may execute multiple times" ;
    pattern:yamlMapping """
        task:
          join: XOR (activates for EACH incoming token)
          split: XOR
          note: May create multiple concurrent instances
    """ .

pattern:Pattern9_StructuredDiscriminator a pattern:AdvancedBranchingPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 9: Structured Discriminator" ;
    rdfs:comment "Convergence that activates on first arriving branch" ;
    pattern:patternNumber 9 ;
    pattern:vanDerAalstId "WCP9" ;
    pattern:joinType "OR" ;
    pattern:splitType "OR" ;
    pattern:expectedTicks 3 ;
    pattern:isDeterministic false ;
    pattern:preservesKGC true ;
    pattern:yamlMapping """
        task:
          join: OR (activates on FIRST incoming token,
                   ignores subsequent tokens from same split)
          split: OR
    """ .

pattern:Pattern10_ArbitraryCycles a pattern:AdvancedBranchingPattern ;
    rdfs:label "Pattern 10: Arbitrary Cycles" ;
    rdfs:comment "Loops with one or more entry/exit points" ;
    pattern:patternNumber 10 ;
    pattern:vanDerAalstId "WCP10" ;
    pattern:expectedTicks 5 ;
    pattern:isDeterministic false ;
    rdfs:comment "May cause deadlock without proper guards" ;
    mapek:requiresDeadlockDetection true ;
    pattern:yamlMapping """
        net:
          structure: cyclic flows allowed
          note: Requires soundness validation
    """ .

pattern:Pattern11_ImplicitTermination a pattern:AdvancedBranchingPattern ;
    rdfs:label "Pattern 11: Implicit Termination" ;
    rdfs:comment "Workflow completes when no tasks can execute" ;
    pattern:patternNumber 11 ;
    pattern:vanDerAalstId "WCP11" ;
    pattern:expectedTicks 1 ;
    pattern:isDeterministic true ;
    pattern:yamlMapping """
        net:
          termination: implicit (no explicit end condition)
          note: Completes when all tasks finished
    """ .

# ============================================================================
# MULTIPLE INSTANCE PATTERNS (12-15)
# ============================================================================

pattern:Pattern12_MIWithoutSynchronization a pattern:MultipleInstancePattern ;
    rdfs:label "Pattern 12: Multiple Instances without Synchronization" ;
    rdfs:comment "Multiple task instances created, no wait for completion" ;
    pattern:patternNumber 12 ;
    pattern:vanDerAalstId "WCP12" ;
    pattern:expectedTicks 4 ;
    pattern:isDeterministic false ;
    pattern:yamlMapping """
        task:
          multipleInstance: true
          minInstances: N
          maxInstances: M
          threshold: no synchronization
    """ .

pattern:Pattern13_MIWithAPrioriDesignTimeKnowledge a pattern:MultipleInstancePattern ;
    rdfs:label "Pattern 13: Multiple Instances with A Priori Design-Time Knowledge" ;
    rdfs:comment "Number of instances known at design time" ;
    pattern:patternNumber 13 ;
    pattern:vanDerAalstId "WCP13" ;
    pattern:expectedTicks 5 ;
    pattern:isDeterministic true ;
    pattern:yamlMapping """
        task:
          multipleInstance: true
          creationMode: static
          instances: fixed number at design time
    """ .

pattern:Pattern14_MIWithAPrioriRuntimeKnowledge a pattern:MultipleInstancePattern ;
    rdfs:label "Pattern 14: Multiple Instances with A Priori Runtime Knowledge" ;
    rdfs:comment "Number of instances determined at runtime before activation" ;
    pattern:patternNumber 14 ;
    pattern:vanDerAalstId "WCP14" ;
    pattern:expectedTicks 6 ;
    pattern:isDeterministic true ;
    pattern:yamlMapping """
        task:
          multipleInstance: true
          creationMode: dynamic
          instances: determined from data at runtime
    """ .

pattern:Pattern15_MIWithoutAPrioriRuntimeKnowledge a pattern:MultipleInstancePattern ;
    rdfs:label "Pattern 15: Multiple Instances without A Priori Runtime Knowledge" ;
    rdfs:comment "Instances created dynamically during execution" ;
    pattern:patternNumber 15 ;
    pattern:vanDerAalstId "WCP15" ;
    pattern:expectedTicks 7 ;
    pattern:isDeterministic false ;
    pattern:yamlMapping """
        task:
          multipleInstance: true
          creationMode: dynamic
          instances: created on-demand during execution
    """ .

# ============================================================================
# STATE-BASED PATTERNS (16-18)
# ============================================================================

pattern:Pattern16_DeferredChoice a pattern:StateBasedPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 16: Deferred Choice" ;
    rdfs:comment "Choice made by environment, not workflow" ;
    pattern:patternNumber 16 ;
    pattern:vanDerAalstId "WCP16" ;
    pattern:joinType "XOR" ;
    pattern:splitType "XOR" ;
    pattern:expectedTicks 3 ;
    pattern:isDeterministic false ;
    rdfs:comment "Choice determined by which event occurs first" ;
    pattern:yamlMapping """
        task:
          join: XOR
          split: XOR (event-driven)
          flows: multiple outgoing enabled simultaneously
                 (first event determines path)
    """ .

pattern:Pattern17_InterleavedParallelRouting a pattern:StateBasedPattern ;
    rdfs:label "Pattern 17: Interleaved Parallel Routing" ;
    rdfs:comment "Parallel execution with mutual exclusion" ;
    pattern:patternNumber 17 ;
    pattern:vanDerAalstId "WCP17" ;
    pattern:expectedTicks 6 ;
    pattern:isDeterministic false ;
    pattern:yamlMapping """
        net:
          parallelism: tasks execute in parallel
          constraint: mutual exclusion enforced
    """ .

pattern:Pattern18_Milestone a pattern:StateBasedPattern , mapek:AdaptivePattern ;
    rdfs:label "Pattern 18: Milestone" ;
    rdfs:comment "Task enabled only while condition holds" ;
    pattern:patternNumber 18 ;
    pattern:vanDerAalstId "WCP18" ;
    pattern:expectedTicks 4 ;
    pattern:isDeterministic false ;
    pattern:yamlMapping """
        task:
          enablement: conditional on milestone state
          note: May miss execution window
    """ .

# ============================================================================
# CANCELLATION AND FORCE COMPLETION PATTERNS (19-25)
# ============================================================================

pattern:Pattern19_CancelActivity a pattern:CancellationPattern ;
    rdfs:label "Pattern 19: Cancel Activity" ;
    rdfs:comment "Enabled activity is disabled and removed" ;
    pattern:patternNumber 19 ;
    pattern:vanDerAalstId "WCP19" ;
    pattern:expectedTicks 2 ;
    pattern:isDeterministic true ;
    pattern:yamlMapping """
        task:
          cancellationRegion: [list of tasks to cancel]
          trigger: cancellation task executes
    """ .

pattern:Pattern20_CancelCase a pattern:CancellationPattern ;
    rdfs:label "Pattern 20: Cancel Case" ;
    rdfs:comment "Entire workflow instance is removed" ;
    pattern:patternNumber 20 ;
    pattern:vanDerAalstId "WCP20" ;
    pattern:expectedTicks 1 ;
    pattern:isDeterministic true ;
    pattern:yamlMapping """
        workflow:
          cancellation: entire case removed
    """ .

# ============================================================================
# Additional Patterns (21-43) - Abbreviated for space
# ============================================================================

pattern:Pattern21_CancelRegion a pattern:CancellationPattern ;
    rdfs:label "Pattern 21: Cancel Region" ;
    pattern:patternNumber 21 ;
    pattern:vanDerAalstId "WCP21" .

pattern:Pattern22_CancelMultipleInstanceActivity a pattern:CancellationPattern ;
    rdfs:label "Pattern 22: Cancel Multiple Instance Activity" ;
    pattern:patternNumber 22 ;
    pattern:vanDerAalstId "WCP22" .

pattern:Pattern23_StructuredLoop a owl:Class ;
    rdfs:label "Pattern 23: Structured Loop" ;
    pattern:patternNumber 23 ;
    pattern:vanDerAalstId "WCP23" .

pattern:Pattern24_Recursion a owl:Class ;
    rdfs:label "Pattern 24: Recursion" ;
    pattern:patternNumber 24 ;
    pattern:vanDerAalstId "WCP24" .

pattern:Pattern25_Transient Trigger a owl:Class ;
    rdfs:label "Pattern 25: Transient Trigger" ;
    pattern:patternNumber 25 ;
    pattern:vanDerAalstId "WCP25" .

# ... (Patterns 26-43 continue with similar structure)

# ============================================================================
# Pattern Metadata Properties
# ============================================================================

pattern:patternNumber a owl:DatatypeProperty ;
    rdfs:label "pattern number" ;
    rdfs:comment "Van der Aalst pattern number (1-43)" ;
    rdfs:range xsd:integer .

pattern:vanDerAalstId a owl:DatatypeProperty ;
    rdfs:label "Van der Aalst ID" ;
    rdfs:comment "Official pattern identifier (WCP1-WCP43)" ;
    rdfs:range xsd:string .

pattern:joinType a owl:DatatypeProperty ;
    rdfs:label "join type" ;
    rdfs:comment "Join semantics (AND, OR, XOR)" ;
    rdfs:range xsd:string .

pattern:splitType a owl:DatatypeProperty ;
    rdfs:label "split type" ;
    rdfs:comment "Split semantics (AND, OR, XOR)" ;
    rdfs:range xsd:string .

pattern:expectedTicks a owl:DatatypeProperty ;
    rdfs:label "expected ticks" ;
    rdfs:comment "Expected execution time in ticks" ;
    rdfs:range xsd:integer .

pattern:isDeterministic a owl:DatatypeProperty ;
    rdfs:label "is deterministic" ;
    rdfs:comment "Whether pattern execution is deterministic" ;
    rdfs:range xsd:boolean .

pattern:preservesKGC a owl:DatatypeProperty ;
    rdfs:label "preserves KGC" ;
    rdfs:comment "Whether pattern preserves Knowledge Graph Computing principles" ;
    rdfs:range xsd:boolean .

pattern:yamlMapping a owl:DatatypeProperty ;
    rdfs:label "YAWL mapping" ;
    rdfs:comment "How pattern maps to YAWL constructs" ;
    rdfs:range xsd:string .
